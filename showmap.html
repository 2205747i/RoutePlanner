<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
      <script test.js></script>
      <script src="loadgpx.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"></script>
      <script async defer
              src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAJqUQPs65F0LCP71ix5CBKddjegbgtVlI&callback=initMap">
      </script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src= "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <script>

          window.onload = function () {
              var url = document.location.href,
                  params = url.split('?')[1].split('&'),
                  data = {}, tmp;
              for (var i = 0, l = params.length; i < l; i++) {
                  tmp = params[i].split('=');
                  data = tmp[1];
              }
              var data1 = data.split("%2C").join(',');
              data1 = data1.split("%20").join(" ");
              data1 = data1.split(",");
              //document.getElementById('demo').innerHTML = data1;
              initMap(data1);

          };

          function initMap(arr) {
              var origin = {lat: 55.8642, lng: -4.2518};
              var map = new google.maps.Map(document.getElementById('map'), {
                  zoom: 14,
                  center: origin
              });
              loadGPXFileIntoGoogleMap(map, "glasgow.gpx", arr);
          }

          function loadGPXFileIntoGoogleMap(map, filename, arr) {
              $.ajax({url: filename,
                  dataType: "xml",
                  success: function(data) {
                      var parser = new GPXParser(data, map);
                      parser.centerAndZoom(data);
                      parser.addOurPointsToMap(arr);
                      parser.test();
                      parser.createRoute();
                      var legs = parser.legs;                      
                  }
          }

          $( document ).ready(function() {
              var shown = 0;
              $( ".menu" ).hide();
              $( ".hamburger" ).click(function() {
                  $( ".menu" ).slideToggle( "slow", function() {
                      if(shown == 0){
                          $( ".menu" ).show();
                          shown = 1;
                      }
                      else{
                          $( ".menu" ).hide();
                          shown = 0;
                      }

                  });
              });
          });
      </script>
	<link rel="stylesheet" type="text/css" href="css/showmap.css">
  </head>
  <body>
        <div id="menu">
        <img class="hamburger" src="img/hamburger.png" alt="Hamburger" style="width:50px;height:50px;">
        <button onclick="parser.legs">Schedule</button>
        </div>

      <p id="demo"></p>
      <p id="schedule"></p>

    <div id="map"></div>



  </body>
</html>
